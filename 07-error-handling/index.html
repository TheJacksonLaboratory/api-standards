
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../06-api-monitoring/">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.16">
    
    
      
        <title>7 Response Errors - API Standards</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 13h-4v4h-2v-4H7v-2h4V7h2v4h4m-5-9A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#7-rest-api-error-handling-best-practices" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="API Standards" class="md-header__button md-logo" aria-label="API Standards" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            API Standards
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              7 Response Errors
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../01-http-standards/" class="md-tabs__link">
          
  
    
  
  Standards Documents

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="API Standards" class="md-nav__button md-logo" aria-label="API Standards" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    API Standards
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Standards Documents
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Standards Documents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01-http-standards/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1 HTTP Standards
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02-domain-names/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2 Domain Names
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03-endpoint-naming/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3 Endpoint Names
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04-openapi-schemas/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4 OpenAPI Schemas
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05-api-versioning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5 Versioning
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06-api-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6 Monitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    7 Response Errors
  </span>
  

      </a>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="7-rest-api-error-handling-best-practices"><strong>7</strong> REST API Error Handling Best Practices</h1>
<p>Error handling is crucial for ensuring the reliability and usability of a REST API service. Proper error handling not only helps developers identify and fix issues but also provides clear and informative responses to clients so they may take corrective action.</p>
<h1 id="guidelines">Guidelines</h1>
<h2 id="71-use-appropriate-http-status-codes"><strong>7.1</strong> Use Appropriate HTTP Status Codes</h2>
<p>HTTP status codes are essential for conveying the outcome of API requests and allow a high level grouping of error responses. Use them consistently to indicate the result of each API call, and avoid using obscure codes that API consumers may not be familiar with.  Common, widely used error codes provide clear semantics and promote consistency and interoperability. These include:  </p>
<ul>
<li><strong>400 Bad Request</strong>: Malformed request syntax or invalid parameters  </li>
<li><strong>401 Unauthorized</strong>: Authentication required or invalid credentials  </li>
<li><strong>403 Forbidden</strong>: The authenticated user does not have permission to perform the operation  </li>
<li><strong>404 Not Found</strong>: Requested resource does not exist</li>
<li><strong>422 Unprocessable Content</strong>: The request is formed correctly but there are semantical errors in the payload</li>
<li><strong>500 Internal Server Error</strong>: Generic server-side error</li>
</ul>
<h2 id="72-provide-detailed-error-messages"><strong>7.2</strong> Provide Detailed Error Messages</h2>
<p>When an error occurs, include detailed error messages in the response. These messages should provide enough information for consumers to understand the cause of the error and take appropriate actions. However, be cautious not to expose sensitive information or specifics that could be exploited by malicious users.  For example, do not include implementation details or detailed stack traces.<br />
<strong>Error messages should clarify the problem and communicate the intended functionality</strong>. For example, if a type check fails on an API to fetch a study record by id, the message "Study ID must be an integer" clearly conveys what is expected.</p>
<h2 id="73-implement-consistent-error-response-format"><strong>7.3</strong> Implement Consistent Error Response Format</h2>
<p>Follow a consistent error response format across all API endpoints, and format error response payloads as JSON. This makes it easier for clients to parse error responses and handle them gracefully. Include fields <strong>status, request_id, error_code, message, timestamp, and trace_id</strong> in your error responses.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">               </span><span class="err">HTTP</span><span class="w"> </span><span class="err">S</span><span class="kc">tatus</span><span class="w"> </span><span class="err">Code</span><span class="w"> </span><span class="kc">f</span><span class="err">or</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">e</span><span class="kc">nt</span><span class="err">ire</span><span class="w"> </span><span class="err">reques</span><span class="kc">t</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="nt">&quot;request_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">           </span><span class="err">Reques</span><span class="kc">t</span><span class="w"> </span><span class="err">ide</span><span class="kc">nt</span><span class="err">i</span><span class="kc">f</span><span class="err">ier</span><span class="w"> </span><span class="err">ge</span><span class="kc">nerate</span><span class="err">d</span><span class="w"> </span><span class="err">by</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">API</span><span class="w"> </span><span class="err">service</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="nt">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">          </span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">          </span><span class="nt">&quot;error_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">     </span><span class="err">Error</span><span class="w"> </span><span class="err">code</span><span class="w"> </span><span class="err">(see</span><span class="w"> </span><span class="err">below)</span><span class="w">     </span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">          </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">        </span><span class="err">Huma</span><span class="kc">n</span><span class="w"> </span><span class="err">readable</span><span class="w"> </span><span class="err">error</span><span class="w"> </span><span class="err">de</span><span class="kc">ta</span><span class="err">ils</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">          </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="w">      </span><span class="err">Da</span><span class="kc">te</span><span class="err">/</span><span class="kc">t</span><span class="err">ime</span><span class="w"> </span><span class="err">o</span><span class="kc">f</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">error</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">          </span><span class="nt">&quot;trace_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w">        </span><span class="err">Poi</span><span class="kc">nter</span><span class="w"> </span><span class="kc">t</span><span class="err">o</span><span class="w"> </span><span class="kc">t</span><span class="err">he</span><span class="w"> </span><span class="err">log</span><span class="w"> </span><span class="kc">tra</span><span class="err">ce</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">     </span><span class="p">}]</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="p">}</span>
</code></pre></div>
<h2 id="74-return-an-errors-array"><strong>7.4</strong> Return An Errors Array</h2>
<p>It is possible for multiple errors to occur within one transaction, so for consistency return an errors collection even if there is only one error. </p>
<h2 id="75-log-errors-for-debugging"><strong>7.5</strong> Log Errors for Debugging</h2>
<p>Log errors on the server-side to aid in debugging and monitoring. Include relevant details like error message, error code, request URL, source, user ID (if available), stack trace, and timestamp. Log errors at appropriate severity levels based on the error's impact, for example "Critical", "Error", "Warning", "Info", "Debug".  If you would like to learn about BioConnect's logging service, please reference the documentation <a href="https://docs.bioconnect.jax.org/core-modules/logging-service/#the-logging-service">here</a>.</p>
<h2 id="76-error-codes"><strong>7.6</strong> Error Codes</h2>
<p>Use meaningful error codes in addition to HTTP status codes to provide more specific information. CS is developing a standard list of error codes that may be used across all of our software applications, providing the following benefits:
<strong>7.6.1</strong> <strong>Clarity and specificity</strong>: HTTP status codes are useful but can be generic and lack context.  In addition to providing status codes, error codes allow us to convey more detailed information about the nature of the error.
<strong>7.6.2</strong> <strong>Consistency</strong>: By aligning on a standard list of error codes, we can ensure that error responses are uniform and predictable, which will make it easier for front end developers to handle errors and provide consistent messaging to users.
<strong>7.6.3</strong> <strong>Error reporting and troubleshooting</strong>: If errors are properly logged, developers will be able to aggregate log data based on error codes, providing insight into errors that occur most frequently.</p>
<p>The following examples show error codes, in combination with status codes and error messages:
1. invalid parameter</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;400&quot;</span><span class="p">,</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nt">&quot;request_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;37472a48-a34e-4813-b064-f863170f33fc&quot;</span><span class="p">,</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nt">&quot;errors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">          </span><span class="nt">&quot;error_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;parameter_invalid&quot;</span><span class="p">,</span><span class="w">  </span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">          </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Cannot convert &#39;abc&#39; to integer&quot;</span><span class="p">,</span><span class="w">  </span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">          </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-07-02T14:07:01&quot;</span><span class="p">,</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">          </span><span class="nt">&quot;trace_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;fb3a02ac6caa&quot;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">     </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="p">}</span>
</code></pre></div>
<ol>
<li>value too large for column in database</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="p">{</span><span class="w">  </span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;400&quot;</span><span class="p">,</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nt">&quot;request_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;a83e5e07-06b2-44f9-a18a-8eefdc3f9bf8&quot;</span><span class="p">,</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">     </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">          </span><span class="nt">&quot;error_code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;value_invalid&quot;</span><span class="p">,</span><span class="w">  </span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">          </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;animal name must be 50 characters or less&quot;</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">          </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2023-08-24T01:10:00&quot;</span><span class="p">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">          </span><span class="nt">&quot;trace_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;3ff84c1df586&quot;</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">     </span><span class="p">}</span><span class="w">  </span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="p">}</span>
</code></pre></div>
<p>Below is the current working list of error codes for CS Rest APIs:</p>
<p>400-Bad Request</p>
<ul>
<li>parameter_missing</li>
<li>parameter_invalid</li>
<li>parameter_length_exceeded</li>
<li>header_invalid</li>
</ul>
<p>401-Unauthorized</p>
<ul>
<li>api_key_required</li>
<li>api_key_invalid</li>
<li>credentials_required</li>
<li>credentials_invalid</li>
</ul>
<p>403-Forbidden</p>
<ul>
<li>privileges_insufficient</li>
<li>request_limit_exceeded</li>
</ul>
<p>404-Not found</p>
<ul>
<li>url_invalid</li>
</ul>
<p>408-Timeout exceeded</p>
<ul>
<li>timeout_exceeded</li>
</ul>
<p>422-Unprocessable content</p>
<ul>
<li>value_missing</li>
<li>value_invalid</li>
<li>value_length_exceeded</li>
</ul>
<h1 id="use-cases-examples">Use Cases &amp; Examples</h1>
<p><strong>Missing/Invalid Parameters</strong>
Consider an API that returns a list of animals based on a weight min and max value. A
validation check is performed to ensure that both parameters are present and numeric. If
the min value type check validation fails, a status code of 400 is returned, along with
a "parameter_invalid" error code and the message "min value must be numeric". If the
parameter is missing all together, the following response is issued:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>        min = request.query_params.get(&#39;min_value&#39;, None)
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>        if min is None:
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>            return Response(
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>              {
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>                &quot;status&quot;: &quot;400&quot;,
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>                &quot;request_id&quot;: &quot;7abfde24-b2e8-49f9-af5b-5f45bd56cce3&quot;,
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>                &quot;errors&quot;:[
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>                  {
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>                    &quot;error&quot;: {
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>                      &quot;error_code&quot;: &quot;parameter_missing&quot;,  
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>                      &quot;message&quot;: &quot;Minimum weight value is required&quot;,
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>                      &quot;timestamp&quot;: &quot;2023-09-24T01:10:00&quot;,
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>                      &quot;trace_id&quot;: &quot;48785f565a27&quot;
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>                    }
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a>                  }
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a>                ]
<a id="__codelineno-3-17" name="__codelineno-3-17" href="#__codelineno-3-17"></a>              }
<a id="__codelineno-3-18" name="__codelineno-3-18" href="#__codelineno-3-18"></a>            )
</code></pre></div>
This example is a good use case for aggregating and reporting on error data in order to improve user experience.  If your error logs are showing high numbers of "parameter_invalid" codes for a certain API, perhaps you should look into front end validation and constraints in order to prevent them.</p>
<p><strong>Insufficient Privileges</strong>
It is important to remember that errors involving privileges fall under the 403 status
code rather than 401. In the case of user based actions, a 401 status code essentially
means "I don't recognize you" and 403 means "I know who you are but you're not allowed
to do this."</p>
<p>A typical use case involving insufficient privileges is an attempt to update a record
when the user does not have read/write access to the data. The API logic should perform
an authorization check before an attempt to update the record, and if not authorized,
the response should inform the user that their request has been denied due to
insufficient privileges.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>return Response(
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>  {
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>    &quot;status&quot;: &quot;403&quot;,
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    &quot;request_id&quot;: &quot;5bbca962-1f57-4016-bac5-5ae9a28d7d2e&quot;,
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    &quot;errors&quot;:[
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>      {
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>        &quot;error_code&quot;: &quot;privileges_insufficient&quot;,  
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>        &quot;message&quot;: &quot;You do not have sufficient privileges to update this record&quot;,
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a>        &quot;timestamp&quot;: &quot;2023-09-24T01:10:00&quot;,
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a>        &quot;trace_id&quot;: &quot;48785f565a27&quot;
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>      }
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    ]
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a>  }
<a id="__codelineno-4-14" name="__codelineno-4-14" href="#__codelineno-4-14"></a>)
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Not all 403 errors are tied to authenticated users</p>
<p>They could also be used for anonymous actions that can only be performed under certain
circumstances (e.g. time based restrictions.)  Another example is a server that only
accepts requests from a predefined range of IP addresses.</p>
</div>
<p><strong>Database Errors</strong>
Database errors can be due to authentication/authorization issues, lost connection, or
data integrity issues such as constraint violations. Database libraries often have some
built in error handling that can be leveraged. When possible, you should catch and
handle specific exceptions rather than generic "Exception" handlers.
Wrap database operations in try-except blocks to catch and handle exceptions, for
example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>        try:
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>            study= Study.objects.get(pk=study_id)
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>            return Response({&#39;identifier&#39;: study.identifier})
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>        except Item.DoesNotExist:
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>            return Response(
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>               {
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>                  &quot;status&quot;: &quot;404&quot;,
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>                  &quot;request_id&quot;: &quot;5bbca962-1f57-4016-bac5-5ae9a28d7d2e&quot;,
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a>                  &quot;errors&quot;:[
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>                    {
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>                      ...
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a>                    }
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a>                  ]
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>                }
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a>            )
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">APIs should be idempotent</p>
</div>
<p>There is no way to group requests together in a transaction in REST APIs. To compensate
for this, you should endeavor
to <a href="https://restfulapi.net/idempotent-rest-apis/">make your APIs idempotent</a>. With the 
exception of a POST request, sending the same request multiple times should produce the 
same result. To validate idempotency, implement test cases encompassing multiple 
invocations of the same request to ensure consistent outcomes irrespective of the number
of executions.</p>
<p><strong>Timeout</strong>
Timeout errors can occur when there are network or service issues, or if a call to the
API involves too much data. A retry mechanism may be used to handle timeout errors,
although this would normally be handled in front end client code when a 504 (Gateway
timeout) is received. If timeouts are occurring due to high server load, consider load
balancing and scaling your application to ameliorate them. Also consider monitoring and
alerts to notify you when timeouts become frequent.</p>
<p><strong>Errors from 3rd Party Libraries</strong>
When calling methods in a 3rd party library, you can follow best practices for handling
specific errors provided you have visibility into the exceptions it may raise. Consider
handling these errors with graceful degradation if it's possible for your application to
continue to function when they occur, for example if you can't retrieve data use cached
data as a fallback. If it's a 3rd party service, and it's possible for it to be down,
consider implementing a retry mechanism.</p>
<p>An API end point that makes a failed call to a 3rd party service should return a 200
response if the error was isolated to the 3rd party service.</p>
<p><strong>Business Logic Failures</strong>
If a request includes data that fails a back end business logic check, return a status
code of 422 (Unprocessable Entity.)  This indicates that the syntax is correct but the
value(s) prevented the call from being successfully processed. Include data in the
response indicating the specific failure. For example, and end point that creates an
animal record expects a date of birth but the date provided is in the future and fails a
business rule check. A "value_invalid" error code and message stating "Date of birth
cannot be in the future" allows the client to correct the error.</p>








  <aside class="md-source-file">
    
    
    
      
  
  <span class="md-source-file__fact">
    <span class="md-icon" title="Contributors">
      
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 4a4 4 0 0 1 4 4 4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4m0 10c4.42 0 8 1.79 8 4v2H4v-2c0-2.21 3.58-4 8-4Z"/></svg>
      
    </span>
    <nav>
      
        <a href="mailto:alexander.berger@jax.org">Alexander Berger</a>
    </nav>
  </span>

    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../06-api-monitoring/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 6 Monitoring">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                6 Monitoring
              </div>
            </div>
          </a>
        
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.footer", "navigation.indexes", "content.code.annotate", "content.code.copy", "content.code.select"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.bd41221c.min.js"></script>
      
    
  </body>
</html>